!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(1).IndexedClient.connect("example").then(function(e){1==e.version?Promise.all([e.createCollection("a_simple_collection").then(function(e){e.insertOne({a:1}).then(function(e){console.log("a_simple_collection",e)})}),e.createCollection("another_collection").then(function(e){e.insertMany([{b:2},{c:3},{d:4}]).then(function(e){console.log("another_collection",e)})})]).then(t=>{e.collection("another_collection").then(t=>{t.find().toArray().then(t=>{console.log(t),e.close()})})}):e.collection("another_collection").then(t=>{t.find().toArray().then(t=>{console.log(t),e.close()})})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2);t.IndexedClient=class{static connect(e,t){return o.Db.open(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3);class r{constructor(e){this.idb=e,this.collectionQueue=new Set}static open(e,t){const n=self.indexedDB.open(e);return new Promise((e,t)=>{n.addEventListener("error",t),n.addEventListener("success",function(t){let o=new r(n.result);e(o)}),n.onblocked=(e=>{console.log("blocked")})})}get version(){return this.idb?this.idb.version:0}createCollection(e,t={autoIncrement:!0}){if(this.idb.objectStoreNames.contains(e))throw new Error("Collection already exists");if(!this.collectionQueue.size&&!this.DBOpenRequest){let e=this.version+1;this.idb.close(),this.DBOpenRequest=self.indexedDB.open(this.idb.name,e)}return this.collectionQueue.add(e),new Promise((n,r)=>{this.DBOpenRequest.addEventListener("error",r),this.DBOpenRequest.addEventListener("upgradeneeded",r=>{let s=this.DBOpenRequest.result;this.idb=s;const i=s.createObjectStore(e,t);i.transaction.addEventListener("complete",t=>{let r=new o.Collection(i,this.idb);this.collectionQueue.delete(e),n(r)})}),this.DBOpenRequest.onsuccess=(e=>{if(this.collectionQueue.size||!this.DBOpenRequest)throw new Error("Not all collections were created");this.DBOpenRequest=null})})}collection(e){if(this.idb.objectStoreNames.contains(e)){const t=this.idb.transaction(e).objectStore(e);return Promise.resolve(new o.Collection(t,this.idb))}return Promise.reject("No such collection")}close(){this.idb.close()}}t.Db=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4);t.Collection=class{constructor(e,t){this.store=e,this.idb=t}insertOne(e,t){return this.insertMany([e],t).then(e=>({insertedCount:1,insertedId:e.insertedIds[0]}))}insertMany(e,t){return new Promise((t,n)=>{let o=[],r=this.idb.transaction(this.store.name,"readwrite");r.oncomplete=(r=>{o.length===e.length?t({insertedCount:o.length,insertedIds:o}):n("No success")}),r.onerror=n;const s=r.objectStore(this.store.name);for(const t of e){const e=s.add(t);e.onerror=n,e.onsuccess=(t=>{o.push(e.result)})}})}find(e){const t=this.idb.transaction(this.store.name).objectStore(this.store.name).getAll();return new o.Cursor(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Cursor=class{constructor(e){this.request=e}toArray(){return new Promise((e,t)=>{this.request.onerror=t,this.request.onsuccess=(t=>{e(this.request.result)})})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V4YW1wbGUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0luZGV4ZWRDbGllbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0RiLnRzIiwid2VicGFjazovLy8uL3NyYy9Db2xsZWN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9DdXJzb3IudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJJbmRleGVkQ2xpZW50IiwiY29ubmVjdCIsInRoZW4iLCJkYiIsInZlcnNpb24iLCJQcm9taXNlIiwiYWxsIiwiY3JlYXRlQ29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJpbnNlcnRPbmUiLCJhIiwiY29uc29sZSIsImxvZyIsImluc2VydE1hbnkiLCJiIiwicmVzIiwiZmluZCIsInRvQXJyYXkiLCJ2YWx1ZXMiLCJjbG9zZSIsIkRiXzEiLCJbb2JqZWN0IE9iamVjdF0iLCJvcHRpb25zIiwiRGIiLCJvcGVuIiwiQ29sbGVjdGlvbl8xIiwiaWRiIiwidGhpcyIsImNvbGxlY3Rpb25RdWV1ZSIsIlNldCIsImNvbGxlY3Rpb25zIiwiREJPcGVuUmVxdWVzdCIsInNlbGYiLCJpbmRleGVkREIiLCJyZXNvbHZlIiwicmVqZWN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicmVzdWx0Iiwib25ibG9ja2VkIiwiZSIsImF1dG9JbmNyZW1lbnQiLCJvYmplY3RTdG9yZU5hbWVzIiwiY29udGFpbnMiLCJFcnJvciIsInNpemUiLCJ2IiwiYWRkIiwic3RvcmUiLCJjcmVhdGVPYmplY3RTdG9yZSIsInRyYW5zYWN0aW9uIiwiQ29sbGVjdGlvbiIsImRlbGV0ZSIsIm9uc3VjY2VzcyIsIm9iamVjdFN0b3JlIiwiQ3Vyc29yXzEiLCJkb2NzIiwiaW5zZXJ0ZWRDb3VudCIsImluc2VydGVkSWQiLCJpbnNlcnRlZElkcyIsIm9uY29tcGxldGUiLCJsZW5ndGgiLCJvbmVycm9yIiwiZG9jIiwib2JqZWN0U3RvcmVSZXF1ZXN0IiwicHVzaCIsInF1ZXJ5IiwicmVxdWVzdCIsImdldEFsbCIsIkN1cnNvciJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxhQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFB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NEMsWUFBWSxNQUcxR3RDLFdBQVltQyxFQUFnQmxDLEdBQ3hCLE9BQU8sSUFBSWpCLFFBQTZCLENBQUM2QixFQUFTQyxLQUM5QyxJQUFJd0IsS0FDQVQsRUFBY3ZCLEtBQUtELElBQUl3QixZQUFZdkIsS0FBS3FCLE1BQU16RSxLQUFNLGFBTXhEMkUsRUFBWVUsV0FBYXBCLEtBQ2pCbUIsRUFBWUUsU0FBV0wsRUFBS0ssT0FDNUIzQixHQUFTdUIsY0FBZ0JFLEVBQVlFLE9BQVFGLGdCQUU3Q3hCLEVBQU8sZ0JBR2ZlLEVBQVlZLFFBQVUzQixFQUV0QixNQUFNbUIsRUFBY0osRUFBWUksWUFBWTNCLEtBQUtxQixNQUFNekUsTUFFdkQsSUFBSyxNQUFNd0YsS0FBT1AsRUFBTSxDQUVwQixNQUFNUSxFQUFxQlYsRUFBWVAsSUFBSWdCLEdBRTNDQyxFQUFtQkYsUUFBVTNCLEVBQzdCNkIsRUFBbUJYLFVBQVksQ0FBQ2hCLElBRzVCc0IsRUFBWU0sS0FBS0QsRUFBbUIxQixhQVdwRGpCLEtBQVM2QyxHQUNMLE1BTU1DLEVBTmN4QyxLQUFLRCxJQUFJd0IsWUFBWXZCLEtBQUtxQixNQUFNekUsTUFDcEIrRSxZQUFZM0IsS0FBS3FCLE1BQU16RSxNQUszQjZGLFNBQzVCLE9BQU8sSUFBSWIsRUFBQWMsT0FBT0Ysb0ZDeEgxQnJHLEVBQUF1RyxhQUNJaEQsWUFBcUI4QyxHQUFBeEMsS0FBQXdDLFVBbUZyQjlDLFVBQ0ksT0FBTyxJQUFJaEIsUUFBYSxDQUFDNkIsRUFBU0MsS0FDOUJSLEtBQUt3QyxRQUFRTCxRQUFVM0IsRUFDdkJSLEtBQUt3QyxRQUFRZCxVQUFZLENBQUNoQixJQUV0QkgsRUFBUVAsS0FBS3dDLFFBQVE3QiIsImZpbGUiOiJleGFtcGxlL2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7SW5kZXhlZENsaWVudH0gZnJvbSBcIi4uL0luZGV4ZWRDbGllbnRcIjtcblxuSW5kZXhlZENsaWVudC5jb25uZWN0KFwiZXhhbXBsZVwiKS50aGVuKGZ1bmN0aW9uIChkYikge1xuICAgIGlmIChkYi52ZXJzaW9uID09IDEpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgY29sbGVjdGlvblxuICAgICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICBkYi5jcmVhdGVDb2xsZWN0aW9uKFwiYV9zaW1wbGVfY29sbGVjdGlvblwiKS50aGVuKGZ1bmN0aW9uIChjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IGEgZG9jdW1lbnQgaW4gdGhlIGNvbGxlY3Rpb25cbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmluc2VydE9uZSh7YSA6IDF9KS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmlzaCB1cCB0ZXN0XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYV9zaW1wbGVfY29sbGVjdGlvblwiLCByKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgZGIuY3JlYXRlQ29sbGVjdGlvbihcImFub3RoZXJfY29sbGVjdGlvblwiKS50aGVuKGZ1bmN0aW9uIChjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IGEgZG9jdW1lbnQgaW4gdGhlIGNvbGxlY3Rpb25cbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmluc2VydE1hbnkoW3tiIDogMn0sIHtjIDogM30sIHtkIDogNH1dKS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmlzaCB1cCB0ZXN0XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYW5vdGhlcl9jb2xsZWN0aW9uXCIsIHIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSldKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICBkYi5jb2xsZWN0aW9uKFwiYW5vdGhlcl9jb2xsZWN0aW9uXCIpLnRoZW4oYyA9PiB7XG4gICAgICAgICAgICAgICAgYy5maW5kKCkudG9BcnJheSgpLnRoZW4odmFsdWVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGIuY29sbGVjdGlvbihcImFub3RoZXJfY29sbGVjdGlvblwiKS50aGVuKGMgPT4ge1xuICAgICAgICAgICAgYy5maW5kKCkudG9BcnJheSgpLnRoZW4odmFsdWVzID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZXMpO1xuICAgICAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuXG59KTsiLCJpbXBvcnQge0RifSBmcm9tIFwiLi9EYlwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEluZGV4ZWRDbGllbnRPcHRpb25zIHtcbiAgICBjb2xsZWN0aW9ucz86IHN0cmluZ1tdXG59XG5cbmV4cG9ydCBjbGFzcyBJbmRleGVkQ2xpZW50IHtcblxuICAgIHN0YXRpYyBjb25uZWN0IChuYW1lOiBzdHJpbmcsIG9wdGlvbnM/OiBJbmRleGVkQ2xpZW50T3B0aW9ucyk6IFByb21pc2U8RGI+IHtcbiAgICAgICAgLy8gSWYgdGhlIHZlcnNpb24gaXMgbm90IHByb3ZpZGVkIGFuZCB0aGUgZGF0YWJhc2UgZXhpc3RzLCB0aGVuIGEgY29ubmVjdGlvbiB0byB0aGUgZGF0YWJhc2Ugd2lsbCBiZSBvcGVuZWQgd2l0aG91dCBjaGFuZ2luZyBpdHMgdmVyc2lvbi4gSWYgdGhlIHZlcnNpb24gaXMgbm90IHByb3ZpZGVkIGFuZCB0aGUgZGF0YWJhc2UgZG9lcyBub3QgZXhpc3QsIHRoZW4gaXQgd2lsbCBiZSBjcmVhdGVkIHdpdGggdmVyc2lvbiAxLlxuICAgICAgICByZXR1cm4gRGIub3BlbihuYW1lKTtcbiAgICB9XG5cbn0iLCJpbXBvcnQge0NvbGxlY3Rpb259IGZyb20gXCIuL0NvbGxlY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIERiIHtcbiAgICBwcml2YXRlIGNvbGxlY3Rpb25RdWV1ZTogU2V0PHN0cmluZz4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBwcml2YXRlIERCT3BlblJlcXVlc3Q6IElEQk9wZW5EQlJlcXVlc3Q7XG5cbiAgICBzdGF0aWMgb3BlbiAobmFtZTogc3RyaW5nLCBjb2xsZWN0aW9ucz86IHN0cmluZ1tdKTogUHJvbWlzZTxEYj4ge1xuXG4gICAgICAgIGNvbnN0IERCT3BlblJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKG5hbWUpO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxEYj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXG4gICAgICAgICAgICAvLyB0aGVzZSB0d28gZXZlbnQgaGFuZGxlcnMgYWN0IG9uIHRoZSBkYXRhYmFzZSBiZWluZyBvcGVuZWRcbiAgICAgICAgICAgIC8vIHN1Y2Nlc3NmdWxseSwgb3Igbm90XG4gICAgICAgICAgICBEQk9wZW5SZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgcmVqZWN0KTtcbiAgICAgICAgICAgIERCT3BlblJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIC8vIHN0b3JlIHRoZSByZXN1bHQgb2Ygb3BlbmluZyB0aGUgZGF0YWJhc2UgaW4gdGhlIGRiXG4gICAgICAgICAgICAgICAgLy8gdmFyaWFibGUuIFRoaXMgaXMgdXNlZCBhIGxvdCBsYXRlciBvbiwgZm9yIG9wZW5pbmdcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbnMgYW5kIHN1Y2hsaWtlLlxuICAgICAgICAgICAgICAgIGxldCBkYiA9IG5ldyBEYihEQk9wZW5SZXF1ZXN0LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIERCT3BlblJlcXVlc3Qub25ibG9ja2VkID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYmxvY2tlZCcpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy9cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IgKHByaXZhdGUgaWRiOiBJREJEYXRhYmFzZSkge1xuICAgIH1cblxuICAgIGdldCB2ZXJzaW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWRiID8gdGhpcy5pZGIudmVyc2lvbiA6IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gIE9wdGlvbmFsXG4gICAgICogQW4gb3B0aW9ucyBvYmplY3Qgd2hvc2UgYXR0cmlidXRlcyBhcmUgb3B0aW9uYWwgcGFyYW1ldGVycyB0byB0aGUgbWV0aG9kLiBJdCBpbmNsdWRlcyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICogfCBBdHRyaWJ1dGUgICAgICAgICAgfCBEZXNjcmlwdGlvbiAgICAgICB8XG4gICAgICogfCAtLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tICAgfFxuICAgICAqIHwga2V5UGF0aCAgICAgICAgICB8IFRoZSBrZXkgcGF0aCB0byBiZSB1c2VkIGJ5IHRoZSBuZXcgb2JqZWN0IHN0b3JlLiBJZiBlbXB0eSBvciBub3Qgc3BlY2lmaWVkLCB0aGUgb2JqZWN0IHN0b3JlIGlzIGNyZWF0ZWQgd2l0aG91dCBhIGtleSBwYXRoIGFuZCB1c2VzIG91dC1vZi1saW5lIGtleXMuIFlvdSBjYW4gYWxzbyBwYXNzIGluIGFuIGFycmF5IGFzIGEga2V5UGF0aC4gfFxuICAgICAqIHwgYXV0b0luY3JlbWVudCAgICB8IElmIHRydWUsIHRoZSBvYmplY3Qgc3RvcmUgaGFzIGEga2V5IGdlbmVyYXRvci4gRGVmYXVsdHMgdG8gZmFsc2UuIHxcbiAgICAgKiBVbmtub3duIHBhcmFtZXRlcnMgYXJlIGlnbm9yZWQuXG4gICAgICovXG4gICAgY3JlYXRlQ29sbGVjdGlvbiAobmFtZTogc3RyaW5nLCBvcHRpb25zOiBJREJPYmplY3RTdG9yZVBhcmFtZXRlcnMgPSB7YXV0b0luY3JlbWVudCA6IHRydWV9KTogUHJvbWlzZTxDb2xsZWN0aW9uPiB7XG4gICAgICAgIGlmICh0aGlzLmlkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKG5hbWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb2xsZWN0aW9uIGFscmVhZHkgZXhpc3RzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jb2xsZWN0aW9uUXVldWUuc2l6ZSAmJiAhdGhpcy5EQk9wZW5SZXF1ZXN0KSB7XG4gICAgICAgICAgICBsZXQgdiA9IHRoaXMudmVyc2lvbiArIDE7XG4gICAgICAgICAgICB0aGlzLmlkYi5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5EQk9wZW5SZXF1ZXN0ID0gc2VsZi5pbmRleGVkREIub3Blbih0aGlzLmlkYi5uYW1lLCB2KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25RdWV1ZS5hZGQobmFtZSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxDb2xsZWN0aW9uPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAvLyB0aGVzZSB0d28gZXZlbnQgaGFuZGxlcnMgYWN0IG9uIHRoZSBkYXRhYmFzZSBiZWluZyBvcGVuZWRcbiAgICAgICAgICAgIC8vIHN1Y2Nlc3NmdWxseSwgb3Igbm90XG4gICAgICAgICAgICB0aGlzLkRCT3BlblJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCByZWplY3QpO1xuXG4gICAgICAgICAgICB0aGlzLkRCT3BlblJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIGUgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBkYjogSURCRGF0YWJhc2UgPSB0aGlzLkRCT3BlblJlcXVlc3QucmVzdWx0O1xuICAgICAgICAgICAgICAgIHRoaXMuaWRiID0gZGI7XG4gICAgICAgICAgICAgICAgLy9UaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIG9ubHkgd2l0aGluIGEgdmVyc2lvbmNoYW5nZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKG5hbWUsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgLy8gVXNlIHRyYW5zYWN0aW9uIG9uY29tcGxldGUgdG8gbWFrZSBzdXJlIHRoZSBvYmplY3RTdG9yZSBjcmVhdGlvbiBpc1xuICAgICAgICAgICAgICAgIC8vIGZpbmlzaGVkIGJlZm9yZSBhZGRpbmcgZGF0YSBpbnRvIGl0LlxuICAgICAgICAgICAgICAgIGxldCB0cmFuc2FjdGlvbiA9IHN0b3JlLnRyYW5zYWN0aW9uO1xuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2xsZWN0aW9uID0gbmV3IENvbGxlY3Rpb24oc3RvcmUsIHRoaXMuaWRiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uUXVldWUuZGVsZXRlKG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNvbGxlY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuREJPcGVuUmVxdWVzdC5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29sbGVjdGlvblF1ZXVlLnNpemUgJiYgdGhpcy5EQk9wZW5SZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuREJPcGVuUmVxdWVzdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGFsbCBjb2xsZWN0aW9ucyB3ZXJlIGNyZWF0ZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29sbGVjdGlvbiAobmFtZTogc3RyaW5nKTogUHJvbWlzZTxDb2xsZWN0aW9uPiB7XG4gICAgICAgIGlmICh0aGlzLmlkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKG5hbWUpKSB7XG4gICAgICAgICAgICBjb25zdCBzdG9yZSA9IHRoaXMuaWRiLnRyYW5zYWN0aW9uKG5hbWUpLm9iamVjdFN0b3JlKG5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQ29sbGVjdGlvbihzdG9yZSwgdGhpcy5pZGIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJObyBzdWNoIGNvbGxlY3Rpb25cIik7XG4gICAgfVxuXG4gICAgY2xvc2UgKCkge1xuICAgICAgICB0aGlzLmlkYi5jbG9zZSgpO1xuICAgIH1cblxufSIsImltcG9ydCB7Q3Vyc29yfSBmcm9tIFwiLi9DdXJzb3JcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDb2xsZWN0aW9uQ3JlYXRlT3B0aW9ucyB7XG5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb2xsZWN0aW9uSW5zZXJ0T25lT3B0aW9ucyB7XG5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnNlcnRPbmVXcml0ZU9wUmVzdWx0IHtcbiAgICBpbnNlcnRlZENvdW50OiBudW1iZXI7XG4gICAgaW5zZXJ0ZWRJZDogYW55O1xufVxuXG5pbnRlcmZhY2UgSW5zZXJ0V3JpdGVPcFJlc3VsdCB7XG4gICAgaW5zZXJ0ZWRDb3VudDogbnVtYmVyO1xuICAgIGluc2VydGVkSWRzOiBhbnlbXTtcbn1cblxuZXhwb3J0IHR5cGUgRmlsdGVyUXVlcnk8VD4gPSB7XG4gICAgW1AgaW4ga2V5b2YgVF0/OiBUW1BdIHwge1xuICAgICRlcT86IFRbUF07XG4gICAgJGd0PzogVFtQXTtcbiAgICAkZ3RlPzogVFtQXTtcbiAgICAkaW4/OiBUW1BdW107XG4gICAgJGx0PzogVFtQXTtcbiAgICAkbHRlPzogVFtQXTtcbiAgICAkbmU/OiBUW1BdO1xuICAgICRuaW4/OiBUW1BdW107XG4gICAgJGFuZD86IChGaWx0ZXJRdWVyeTxUW1BdPiB8IFRbUF0pW107XG4gICAgJG9yPzogKEZpbHRlclF1ZXJ5PFRbUF0+IHwgVFtQXSlbXTtcbiAgICAkbm90PzogKEZpbHRlclF1ZXJ5PFRbUF0+IHwgVFtQXSlbXSB8IFRbUF07XG4gICAgJGV4cHI/OiBhbnk7XG4gICAgJGpzb25TY2hlbWE/OiBhbnk7XG4gICAgJG1vZD86IFtudW1iZXIsIG51bWJlcl07XG4gICAgJHJlZ2V4PzogUmVnRXhwO1xuICAgICRvcHRpb25zPzogc3RyaW5nO1xuICAgICR0ZXh0Pzoge1xuICAgICAgICAkc2VhcmNoOiBzdHJpbmc7XG4gICAgICAgICRsYW5ndWFnZT86IHN0cmluZztcbiAgICAgICAgJGNhc2VTZW5zaXRpdmU/OiBib29sZWFuO1xuICAgICAgICAkZGlhY3JhdGljU2Vuc2l0aXZlPzogYm9vbGVhbjtcbiAgICB9O1xuICAgICR3aGVyZTogT2JqZWN0O1xuICAgICRnZW9JbnRlcnNlY3RzPzogT2JqZWN0O1xuICAgICRnZW9XaXRoaW4/OiBPYmplY3Q7XG4gICAgJG5lYXI/OiBPYmplY3Q7XG4gICAgJG5lYXJTcGhlcmU/OiBPYmplY3Q7XG4gICAgJGVsZW1NYXRjaD86IE9iamVjdDtcbiAgICAkc2l6ZT86IG51bWJlcjtcbiAgICAkYml0c0FsbENsZWFyPzogT2JqZWN0O1xuICAgICRiaXRzQWxsU2V0PzogT2JqZWN0O1xuICAgICRiaXRzQW55Q2xlYXI/OiBPYmplY3Q7XG4gICAgJGJpdHNBbnlTZXQ/OiBPYmplY3Q7XG4gICAgW2tleTogc3RyaW5nXTogYW55O1xufTtcbn0gfCB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuXG5leHBvcnQgY2xhc3MgQ29sbGVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IgKHByaXZhdGUgc3RvcmU6IElEQk9iamVjdFN0b3JlLCBwcml2YXRlIGlkYjogSURCRGF0YWJhc2UpIHtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3NcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGluc2VydE9uZSAoZG9jczogT2JqZWN0LCBvcHRpb25zPzogQ29sbGVjdGlvbkluc2VydE9uZU9wdGlvbnMpOiBQcm9taXNlPEluc2VydE9uZVdyaXRlT3BSZXN1bHQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0TWFueShbZG9jc10sIG9wdGlvbnMpLnRoZW4ocmVzID0+ICh7aW5zZXJ0ZWRDb3VudCA6IDEsIGluc2VydGVkSWQgOiByZXMuaW5zZXJ0ZWRJZHNbMF19KSk7XG4gICAgfVxuXG4gICAgaW5zZXJ0TWFueSAoZG9jczogT2JqZWN0W10sIG9wdGlvbnM/OiBDb2xsZWN0aW9uSW5zZXJ0T25lT3B0aW9ucyk6IFByb21pc2U8SW5zZXJ0V3JpdGVPcFJlc3VsdD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8SW5zZXJ0V3JpdGVPcFJlc3VsdD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IGluc2VydGVkSWRzOiBhbnlbXSA9IFtdO1xuICAgICAgICAgICAgbGV0IHRyYW5zYWN0aW9uID0gdGhpcy5pZGIudHJhbnNhY3Rpb24odGhpcy5zdG9yZS5uYW1lLCBcInJlYWR3cml0ZVwiKTtcblxuICAgICAgICAgICAgLy8gVG8gZGV0ZXJtaW5lIGlmIHRoZSBhZGQgb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LFxuICAgICAgICAgICAgLy8gbGlzdGVuIGZvciB0aGUgdHJhbnNhY3Rpb27igJlzIGNvbXBsZXRlIGV2ZW50IGluIGFkZGl0aW9uIHRvIHRoZVxuICAgICAgICAgICAgLy8gSURCT2JqZWN0U3RvcmUuYWRkIHJlcXVlc3TigJlzIHN1Y2Nlc3MgZXZlbnQsXG4gICAgICAgICAgICAvLyBiZWNhdXNlIHRoZSB0cmFuc2FjdGlvbiBtYXkgc3RpbGwgZmFpbCBhZnRlciB0aGUgc3VjY2VzcyBldmVudCBmaXJlcy5cbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0ZWRJZHMubGVuZ3RoID09PSBkb2NzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtpbnNlcnRlZENvdW50IDogaW5zZXJ0ZWRJZHMubGVuZ3RoLCBpbnNlcnRlZElkc30pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChcIk5vIHN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uZXJyb3IgPSByZWplY3Q7XG5cbiAgICAgICAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5zdG9yZS5uYW1lKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBkb2Mgb2YgZG9jcykge1xuICAgICAgICAgICAgICAgIC8vIE1ha2UgYSByZXF1ZXN0IHRvIGFkZCBkb2NzIG9iamVjdCB0byB0aGUgb2JqZWN0IHN0b3JlXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmVSZXF1ZXN0ID0gb2JqZWN0U3RvcmUuYWRkKGRvYyk7XG5cbiAgICAgICAgICAgICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgICAgICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSByZXN1bHQgb2YgYSByZXF1ZXN0IGdlbmVyYXRlZCBmcm9tIGEgY2FsbCB0byBhZGQoKVxuICAgICAgICAgICAgICAgICAgICAvLyBpcyB0aGUga2V5IG9mIHRoZSB2YWx1ZSB0aGF0IHdhcyBhZGRlZC5cbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ZWRJZHMucHVzaChvYmplY3RTdG9yZVJlcXVlc3QucmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWVyeVtvcHRpb25hbF1cbiAgICAgKiBUaGUgZmluZCgpIG1ldGhvZCB3aXRoIG5vIHBhcmFtZXRlcnMgcmV0dXJucyBhbGwgZG9jdW1lbnRzIGZyb20gYSBjb2xsZWN0aW9uIGFuZCByZXR1cm5zIGFsbCBmaWVsZHMgZm9yIHRoZSBkb2N1bWVudHMuXG4gICAgICovXG4gICAgZmluZDxUPiAocXVlcnk/OiBGaWx0ZXJRdWVyeTxUPik6IEN1cnNvcjxUPiB7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5pZGIudHJhbnNhY3Rpb24odGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICAvL1RPRE86IHByb2Nlc3MgdGhlIHF1ZXJ5XG4gICAgICAgIC8vIFRoZSBnZXRBbGwoKSBtZXRob2Qgb2YgdGhlIElEQk9iamVjdFN0b3JlIGludGVyZmFjZSByZXR1cm5zIGFuIElEQlJlcXVlc3Qgb2JqZWN0XG4gICAgICAgIC8vIGNvbnRhaW5pbmcgYWxsIG9iamVjdHMgaW4gdGhlIG9iamVjdCBzdG9yZSBtYXRjaGluZyB0aGUgc3BlY2lmaWVkIHBhcmFtZXRlciBvclxuICAgICAgICAvLyBhbGwgb2JqZWN0cyBpbiB0aGUgc3RvcmUgaWYgbm8gcGFyYW1ldGVycyBhcmUgZ2l2ZW4uXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBvYmplY3RTdG9yZS5nZXRBbGwoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDdXJzb3IocmVxdWVzdCk7XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBDdXJzb3I8VD4ge1xuICAgIGNvbnN0cnVjdG9yIChwcml2YXRlIHJlcXVlc3Q6IElEQlJlcXVlc3QpIHtcblxuICAgIH1cblxuICAgIC8vIHNvcnRWYWx1ZTogc3RyaW5nO1xuICAgIC8vIHRpbWVvdXQ6IGJvb2xlYW47XG4gICAgLy8gcmVhZFByZWZlcmVuY2U6IFJlYWRQcmVmZXJlbmNlO1xuICAgIC8vIC8qKiBodHRwOi8vbW9uZ29kYi5naXRodWIuaW8vbm9kZS1tb25nb2RiLW5hdGl2ZS8zLjEvYXBpL0N1cnNvci5odG1sI2FkZEN1cnNvckZsYWcgKi9cbiAgICAvLyBhZGRDdXJzb3JGbGFnKGZsYWc6IHN0cmluZywgdmFsdWU6IGJvb2xlYW4pOiBDdXJzb3I8VD47XG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjYWRkUXVlcnlNb2RpZmllciAqL1xuICAgIC8vIGFkZFF1ZXJ5TW9kaWZpZXIobmFtZTogc3RyaW5nLCB2YWx1ZTogYm9vbGVhbik6IEN1cnNvcjxUPjtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNiYXRjaFNpemUgKi9cbiAgICAvLyBiYXRjaFNpemUodmFsdWU6IG51bWJlcik6IEN1cnNvcjxUPjtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNjbG9uZSAqL1xuICAgIC8vIGNsb25lKCk6IEN1cnNvcjxUPjsgLy8gc3RpbGwgcmV0dXJucyB0aGUgc2FtZSB0eXBlXG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjY2xvc2UgKi9cbiAgICAvLyBjbG9zZSgpOiBQcm9taXNlPEN1cnNvclJlc3VsdD47XG4gICAgLy8gY2xvc2UoY2FsbGJhY2s6IE1vbmdvQ2FsbGJhY2s8Q3Vyc29yUmVzdWx0Pik6IHZvaWQ7XG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjY29sbGF0aW9uICovXG4gICAgLy8gY29sbGF0aW9uKHZhbHVlOiBPYmplY3QpOiBDdXJzb3I8VD47XG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjY29tbWVudCAqL1xuICAgIC8vIGNvbW1lbnQodmFsdWU6IHN0cmluZyk6IEN1cnNvcjxUPjtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNjb3VudCAqL1xuICAgIC8vIGNvdW50KGNhbGxiYWNrOiBNb25nb0NhbGxiYWNrPG51bWJlcj4pOiB2b2lkO1xuICAgIC8vIGNvdW50KGFwcGx5U2tpcExpbWl0OiBib29sZWFuLCBjYWxsYmFjazogTW9uZ29DYWxsYmFjazxudW1iZXI+KTogdm9pZDtcbiAgICAvLyBjb3VudChvcHRpb25zOiBDdXJzb3JDb21tZW50T3B0aW9ucywgY2FsbGJhY2s6IE1vbmdvQ2FsbGJhY2s8bnVtYmVyPik6IHZvaWQ7XG4gICAgLy8gY291bnQoYXBwbHlTa2lwTGltaXQ6IGJvb2xlYW4sIG9wdGlvbnM6IEN1cnNvckNvbW1lbnRPcHRpb25zLCBjYWxsYmFjazogTW9uZ29DYWxsYmFjazxudW1iZXI+KTogdm9pZDtcbiAgICAvLyBjb3VudChhcHBseVNraXBMaW1pdD86IGJvb2xlYW4sIG9wdGlvbnM/OiBDdXJzb3JDb21tZW50T3B0aW9ucyk6IFByb21pc2U8bnVtYmVyPjtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNleHBsYWluICovXG4gICAgLy8gZXhwbGFpbigpOiBQcm9taXNlPEN1cnNvclJlc3VsdD47XG4gICAgLy8gZXhwbGFpbihjYWxsYmFjazogTW9uZ29DYWxsYmFjazxDdXJzb3JSZXN1bHQ+KTogdm9pZDtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNmaWx0ZXIgKi9cbiAgICAvLyBmaWx0ZXIoZmlsdGVyOiBPYmplY3QpOiBDdXJzb3I8VD47XG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjZm9yRWFjaCAqL1xuICAgIC8vIGZvckVhY2goaXRlcmF0b3I6IEl0ZXJhdG9yQ2FsbGJhY2s8VD4sIGNhbGxiYWNrOiBFbmRDYWxsYmFjayk6IHZvaWQ7XG4gICAgLy8gZm9yRWFjaChpdGVyYXRvcjogSXRlcmF0b3JDYWxsYmFjazxUPik6IFByb21pc2U8dm9pZD47XG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjaGFzTmV4dCAqL1xuICAgIC8vIGhhc05leHQoKTogUHJvbWlzZTxib29sZWFuPjtcbiAgICAvLyBoYXNOZXh0KGNhbGxiYWNrOiBNb25nb0NhbGxiYWNrPGJvb2xlYW4+KTogdm9pZDtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNoaW50ICovXG4gICAgLy8gaGludChoaW50OiBPYmplY3QpOiBDdXJzb3I8VD47XG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjaXNDbG9zZWQgKi9cbiAgICAvLyBpc0Nsb3NlZCgpOiBib29sZWFuO1xuICAgIC8vIC8qKiBodHRwOi8vbW9uZ29kYi5naXRodWIuaW8vbm9kZS1tb25nb2RiLW5hdGl2ZS8zLjEvYXBpL0N1cnNvci5odG1sI2xpbWl0ICovXG4gICAgLy8gbGltaXQodmFsdWU6IG51bWJlcik6IEN1cnNvcjxUPjtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNtYXAgKi9cbiAgICAvLyBtYXA8VT4odHJhbnNmb3JtOiAoZG9jdW1lbnQ6IFQpID0+IFUpOiBDdXJzb3I8VT47XG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjbWF4ICovXG4gICAgLy8gbWF4KG1heDogbnVtYmVyKTogQ3Vyc29yPFQ+O1xuICAgIC8vIC8qKiBodHRwOi8vbW9uZ29kYi5naXRodWIuaW8vbm9kZS1tb25nb2RiLW5hdGl2ZS8zLjEvYXBpL0N1cnNvci5odG1sI21heEF3YWl0VGltZU1TICovXG4gICAgLy8gbWF4QXdhaXRUaW1lTVModmFsdWU6IG51bWJlcik6IEN1cnNvcjxUPjtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNtYXhTY2FuICovXG4gICAgLy8gbWF4U2NhbihtYXhTY2FuOiBPYmplY3QpOiBDdXJzb3I8VD47XG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjbWF4VGltZU1TICovXG4gICAgLy8gbWF4VGltZU1TKHZhbHVlOiBudW1iZXIpOiBDdXJzb3I8VD47XG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjbWluICovXG4gICAgLy8gbWluKG1pbjogbnVtYmVyKTogQ3Vyc29yPFQ+O1xuICAgIC8vIC8qKiBodHRwOi8vbW9uZ29kYi5naXRodWIuaW8vbm9kZS1tb25nb2RiLW5hdGl2ZS8zLjEvYXBpL0N1cnNvci5odG1sI25leHQgKi9cbiAgICAvLyBuZXh0KCk6IFByb21pc2U8VCB8IG51bGw+O1xuICAgIC8vIG5leHQoY2FsbGJhY2s6IE1vbmdvQ2FsbGJhY2s8VCB8IG51bGw+KTogdm9pZDtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNwcm9qZWN0ICovXG4gICAgLy8gcHJvamVjdCh2YWx1ZTogT2JqZWN0KTogQ3Vyc29yPFQ+O1xuICAgIC8vIC8qKiBodHRwOi8vbW9uZ29kYi5naXRodWIuaW8vbm9kZS1tb25nb2RiLW5hdGl2ZS8zLjEvYXBpL0N1cnNvci5odG1sI3JlYWQgKi9cbiAgICAvLyByZWFkKHNpemU6IG51bWJlcik6IHN0cmluZyB8IEJ1ZmZlciB8IHZvaWQ7XG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjbmV4dCAqL1xuICAgIC8vIHJldHVybktleShyZXR1cm5LZXk6IE9iamVjdCk6IEN1cnNvcjxUPjtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNyZXdpbmQgKi9cbiAgICAvLyByZXdpbmQoKTogdm9pZDtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNzZXRDdXJzb3JPcHRpb24gKi9cbiAgICAvLyBzZXRDdXJzb3JPcHRpb24oZmllbGQ6IHN0cmluZywgdmFsdWU6IE9iamVjdCk6IEN1cnNvcjxUPjtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNzZXRSZWFkUHJlZmVyZW5jZSAqL1xuICAgIC8vIHNldFJlYWRQcmVmZXJlbmNlKHJlYWRQcmVmZXJlbmNlOiBzdHJpbmcgfCBSZWFkUHJlZmVyZW5jZSk6IEN1cnNvcjxUPjtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNzaG93UmVjb3JkSWQgKi9cbiAgICAvLyBzaG93UmVjb3JkSWQoc2hvd1JlY29yZElkOiBPYmplY3QpOiBDdXJzb3I8VD47XG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjc2tpcCAqL1xuICAgIC8vIHNraXAodmFsdWU6IG51bWJlcik6IEN1cnNvcjxUPjtcbiAgICAvLyAvKiogaHR0cDovL21vbmdvZGIuZ2l0aHViLmlvL25vZGUtbW9uZ29kYi1uYXRpdmUvMy4xL2FwaS9DdXJzb3IuaHRtbCNzbmFwc2hvdCAqL1xuICAgIC8vIHNuYXBzaG90KHNuYXBzaG90OiBPYmplY3QpOiBDdXJzb3I8VD47XG4gICAgLy8gLyoqIGh0dHA6Ly9tb25nb2RiLmdpdGh1Yi5pby9ub2RlLW1vbmdvZGItbmF0aXZlLzMuMS9hcGkvQ3Vyc29yLmh0bWwjc29ydCAqL1xuICAgIC8vIHNvcnQoa2V5T3JMaXN0OiBzdHJpbmcgfCBPYmplY3RbXSB8IE9iamVjdCwgZGlyZWN0aW9uPzogbnVtYmVyKTogQ3Vyc29yPFQ+O1xuICAgIC8vIC8qKiBodHRwOi8vbW9uZ29kYi5naXRodWIuaW8vbm9kZS1tb25nb2RiLW5hdGl2ZS8zLjEvYXBpL0N1cnNvci5odG1sI3N0cmVhbSAqL1xuICAgIC8vIHN0cmVhbShvcHRpb25zPzogeyB0cmFuc2Zvcm0/OiBGdW5jdGlvbiB9KTogQ3Vyc29yPFQ+O1xuICAgIC8vIC8qKiBodHRwOi8vbW9uZ29kYi5naXRodWIuaW8vbm9kZS1tb25nb2RiLW5hdGl2ZS8zLjEvYXBpL0N1cnNvci5odG1sI3RvQXJyYXkgKi9cbiAgICB0b0FycmF5ICgpOiBQcm9taXNlPFRbXT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8VFtdPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3Qub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBEbyBzb21ldGhpbmcgd2l0aCB0aGUgcmVxdWVzdC5yZXN1bHQhXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlcXVlc3QucmVzdWx0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIC8qKiBodHRwOi8vbW9uZ29kYi5naXRodWIuaW8vbm9kZS1tb25nb2RiLW5hdGl2ZS8zLjEvYXBpL0N1cnNvci5odG1sI3Vuc2hpZnQgKi9cbiAgICAvLyB1bnNoaWZ0KHN0cmVhbTogQnVmZmVyIHwgc3RyaW5nKTogdm9pZDtcbn0iXSwic291cmNlUm9vdCI6IiJ9